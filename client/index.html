<!--Canvas-->
<canvas id ="ctx" width="500" height="500" style="border:1px solid #000000;"></canvas>

<!-- Sources Socket.io -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.js"></script>

<script>
    //ctx canvas info, drawing context
    var ctx = document.getElementById("ctx").getContext("2d");
    ctx.font = '30px Arial';
    
    //(R1) requests socket file and initialises connection (connects).
    var socket = io();

    /* //Example of client listening and sending
    //Client sends message to server
    var happy = function(){
        socket.emit('happy',{ //emit happy to server
            reason:'birthday', //extra data as object:reason 
        }); 
    }
    happy();
    //Client listens for message from server
    socket.on('serverMsg',function(output){ //listen for client 'happy', execute. 
        console.log('Server says '+output.msg);
    });
    */

    //Client listens for newPosition of client from server
    socket.on('newPositions',function(position){ //listen for client 'newPosition', execute. 
        ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
        for(var i = 0; i < position.length; i++){
            ctx.fillText(position[i].number, position[i].x, position[i].y);
        }
        
    });

    //SEND KEYBOARD STATES
    document.onkeydown = function(event){
        if(event.keyCode === 68) //d
            socket.emit('keyPress',{inputId:'right',state:true});
        else if(event.keyCode === 83) //s
            socket.emit('keyPress',{inputId:'down',state:true});
        else if(event.keyCode === 65) //a
            socket.emit('keyPress',{inputId:'left',state:true});
        else if(event.keyCode === 87) //w
            socket.emit('keyPress',{inputId:'up',state:true});
    }
    document.onkeyup = function(event){
        if(event.keyCode === 68) //d
            socket.emit('keyPress',{inputId:'right',state:false});
        else if(event.keyCode === 83) //s
            socket.emit('keyPress',{inputId:'down',state:false});
        else if(event.keyCode === 65) //a
            socket.emit('keyPress',{inputId:'left',state:false});
        else if(event.keyCode === 87) //w
            socket.emit('keyPress',{inputId:'up',state:false});
    }
    
</script>
